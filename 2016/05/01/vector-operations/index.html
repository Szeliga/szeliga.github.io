		<!DOCTYPE html>
<html lang="en-us">
<head>
	<title>Vector operations &middot; After Eight Coding</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-Frame-Options" content="sameorigin">
	<meta name="author" content="Szymon Szeliga">
	<meta name="description" content="A development journal about writting a ray tracer in Go">
	<meta name="generator" content="Hugo 0.16" />

	<!-- CSS -->
	<link rel="stylesheet" href="https://szeliga.github.io/css/main.css">

	<!--Favicon-->
	<link rel="shortcut icon" href="https://szeliga.github.io/favicon.ico" type="image/x-icon">

	<!-- RSS -->
	

	<!-- Font Awesome -->
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- Google Fonts -->
	<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet" type="text/css">
</head>
		<body>
			<header class="site-header">
	<div class="branding">
		<a href="https://szeliga.github.io/">
		
			<img class="avatar" src="https://www.gravatar.com/avatar/9f51c29157a82507ca44f5f9617ba26c?s=100&d=identicon" alt=""/>
		
		</a>
		<h1 class="site-title">
			<a href="https://szeliga.github.io/">After Eight Coding</a>
		</h1>
	</div>
	<nav class="site-nav">
		<ul>
	      	
	        	<li><a href="/about/"> About </a></li>
	      	

	      	
<li>
	<a href="https://szeliga.github.io/" title="">
		<i class="fa fa-fw fa-home"></i>
	</a>
</li>



<li>
	<a href="https://szeliga.github.io/index.xml" title="Subcribe">
		<i class="fa fa-fw fa-rss"></i>
	</a>
</li>



<li>
	<a href="mailto:szeliga.szymon@gmail.com" title="Email">
		<i class="fa fa-fw fa-envelope"></i>
	</a>
</li>













<li>
	<a href="https://github.com/Szeliga" title="Github">
		<i class="fa fa-fw fa-github"></i>
	</a>
</li>







<li>
	<a href="https://www.linkedin.com/in/szymonszeliga" title="Linkedin">
		<i class="fa fa-fw fa-linkedin"></i>
	</a>
</li>




















	    </ul>
	</nav>
</header>

			<div class="content">
				
				<article>
					<header>
						<h1 class="title">Vector operations</h1>
					</header>
				

				<section class="post-content">
					

<h2 id="foreword">Foreword</h2>

<p>Vectors are the core mathematical tool hiding inside the ray tracing algorithm. They allow us to describe relations in 3 dimensional space.</p>

<p>In this blog post I will describe all of the needed vector operations that will be used in GoRay.</p>

<h2 id="vector-representation-in-go">Vector representation in Go</h2>

<p>First thing I need to do, is define how vectors will be represented in the code. I&rsquo;m coming from a highly object oriented language (ruby), so naturally I picked a thing that ressembles objects the most - <code>struct</code> (this may not be the Go way, so if You have any other propositions, please ping me).</p>

<p>So let&rsquo;s define a struct that will represent a 3 dimensional vector with coordinates <code>(x, y, z)</code>:</p>
<div class="highlight"><pre><code class="language-go" data-lang="go"><span></span><span class="kn">package</span> <span class="nx">math</span>

<span class="kn">import</span> <span class="s">&quot;math&quot;</span>

<span class="c1">// Vector - struct holding X Y Z values of a 3D vector</span>
<span class="kd">type</span> <span class="nx">Vector</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">X</span><span class="p">,</span> <span class="nx">Y</span><span class="p">,</span> <span class="nx">Z</span> <span class="kt">float64</span>
<span class="p">}</span>
</code></pre></div>

<p><em>Note that the struct&rsquo;s name and all of the coordinates are written in capital letters. That&rsquo;s because in Go, only stuff that&rsquo;s written in capital letters gets exported when your package is imported somewhere. Lowercase functions, structs, etc. are available only inside the package. If you want some more information about this, visit 

    
        
    

    <a href="https://www.goinggo.net/2014/03/exportedunexported-identifiers-in-go.html" target='_blank'>this link</a>

</em></p>

<h2 id="operations-on-vectors">Operations on vectors</h2>

<p>Go allows us to define methods on structs, which seems like a perfect candidate for defining all of the needed vector operations.
Methods are plain Go functions, but they are defined with a receiver that comes before the function name.</p>

<p>We can define a method on a receiver in two ways:</p>

<ol>
<li><p>Pointer receiver</p>
<div class="highlight"><pre><code class="language-go" data-lang="go"><span></span><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="o">*</span><span class="nx">Vector</span><span class="p">)</span> <span class="nx">Add</span><span class="p">(</span><span class="nx">b</span> <span class="nx">Vector</span><span class="p">)</span> <span class="nx">Vector</span> <span class="p">{</span>
	<span class="nx">a</span><span class="p">.</span><span class="nx">X</span> <span class="o">+=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">X</span>
	<span class="nx">a</span><span class="p">.</span><span class="nx">Y</span> <span class="o">+=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">Y</span>
	<span class="nx">a</span><span class="p">.</span><span class="nx">Z</span> <span class="o">+=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">Z</span>
	<span class="k">return</span> <span class="nx">a</span>
<span class="p">}</span>
</code></pre></div></li>

<li><p>Value receiver</p>
<div class="highlight"><pre><code class="language-go" data-lang="go"><span></span><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Vector</span><span class="p">)</span> <span class="nx">Add</span><span class="p">(</span><span class="nx">b</span> <span class="nx">Vector</span><span class="p">)</span> <span class="nx">Vector</span> <span class="p">{</span>
	<span class="nx">a</span><span class="p">.</span><span class="nx">X</span> <span class="o">+=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">X</span>
	<span class="nx">a</span><span class="p">.</span><span class="nx">Y</span> <span class="o">+=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">Y</span>
	<span class="nx">a</span><span class="p">.</span><span class="nx">Z</span> <span class="o">+=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">Z</span>
	<span class="k">return</span> <span class="nx">a</span>
<span class="p">}</span>
</code></pre></div></li>
</ol>

<p>The core difference between these two is that, the one that is defined on a pointer receiver, will mutate the actual object it was called on. Analogically a method called on a value receiver will not mutate the receiver, because it will operate on a copy of the original receiver.</p>

<p>All of the methods that will be presented in this post are defined on a value receiver. A new <code>Vector</code> will be returned where applicable.
This type of notation allows for a verbose representation of the equations used in the ray tracing algorithm.</p>

<p>With the technicalities out of the way, let&rsquo;s move on to implementing the actual vector operations.</p>

<h3 id="adding-two-vectors">Adding two vectors</h3>

<p>This operation is achieved by adding the corresponding coefficients of two vectors together:</p>
<div class="highlight"><pre><code class="language-go" data-lang="go"><span></span><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Vector</span><span class="p">)</span> <span class="nx">Add</span><span class="p">(</span><span class="nx">b</span> <span class="nx">Vector</span><span class="p">)</span> <span class="nx">Vector</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">Vector</span><span class="p">{</span>
		<span class="nx">X</span><span class="p">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">X</span> <span class="o">+</span> <span class="nx">b</span><span class="p">.</span><span class="nx">X</span><span class="p">,</span>
		<span class="nx">Y</span><span class="p">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">Y</span> <span class="o">+</span> <span class="nx">b</span><span class="p">.</span><span class="nx">Y</span><span class="p">,</span>
		<span class="nx">Z</span><span class="p">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">Z</span> <span class="o">+</span> <span class="nx">b</span><span class="p">.</span><span class="nx">Z</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">TestAdd</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">result</span> <span class="o">:=</span> <span class="nx">Vector</span><span class="p">{</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">}.</span><span class="nx">Add</span><span class="p">(</span><span class="nx">Vector</span><span class="p">{</span><span class="mf">2.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">})</span>
	<span class="nx">assert</span><span class="p">.</span><span class="nx">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">Vector</span><span class="p">{</span><span class="mf">3.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">},</span> <span class="nx">result</span><span class="p">,</span> <span class="s">&quot;should add correctly&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="subtracting-two-vectors">Subtracting two vectors</h3>

<p>Analogically to addition of two vectors, we subtract the corresponding coefficients of two vectors:</p>
<div class="highlight"><pre><code class="language-go" data-lang="go"><span></span><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Vector</span><span class="p">)</span> <span class="nx">Sub</span><span class="p">(</span><span class="nx">b</span> <span class="nx">Vector</span><span class="p">)</span> <span class="nx">Vector</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">Vector</span><span class="p">{</span>
		<span class="nx">X</span><span class="p">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">X</span> <span class="o">-</span> <span class="nx">b</span><span class="p">.</span><span class="nx">X</span><span class="p">,</span>
		<span class="nx">Y</span><span class="p">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">Y</span> <span class="o">-</span> <span class="nx">b</span><span class="p">.</span><span class="nx">Y</span><span class="p">,</span>
		<span class="nx">Z</span><span class="p">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">Z</span> <span class="o">-</span> <span class="nx">b</span><span class="p">.</span><span class="nx">Z</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">TestSub</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">result</span> <span class="o">:=</span> <span class="nx">Vector</span><span class="p">{</span><span class="mf">3.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">}.</span><span class="nx">Sub</span><span class="p">(</span><span class="nx">Vector</span><span class="p">{</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">})</span>
	<span class="nx">assert</span><span class="p">.</span><span class="nx">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">Vector</span><span class="p">{</span><span class="mf">2.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">},</span> <span class="nx">result</span><span class="p">,</span> <span class="s">&quot;should subtract correcly&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="multiplying-vector-by-scalar">Multiplying vector by scalar</h3>

<p>Multiplying by a scalar can be interpreted as scaling the vector (modifying it&rsquo;s length). This operation is also pretty straightforward, as we have to multiply each coefficient by the scalar:</p>
<div class="highlight"><pre><code class="language-go" data-lang="go"><span></span><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Vector</span><span class="p">)</span> <span class="nx">MultiplyByScalar</span><span class="p">(</span><span class="nx">s</span> <span class="kt">float64</span><span class="p">)</span> <span class="nx">Vector</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">Vector</span><span class="p">{</span>
		<span class="nx">X</span><span class="p">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">X</span> <span class="o">*</span> <span class="nx">s</span><span class="p">,</span>
		<span class="nx">Y</span><span class="p">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">Y</span> <span class="o">*</span> <span class="nx">s</span><span class="p">,</span>
		<span class="nx">Z</span><span class="p">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">Z</span> <span class="o">*</span> <span class="nx">s</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">TestMultiplyByScalar</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">result</span> <span class="o">:=</span> <span class="nx">Vector</span><span class="p">{</span><span class="mf">3.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">}.</span><span class="nx">MultiplyByScalar</span><span class="p">(</span><span class="mf">2.</span><span class="p">)</span>
	<span class="nx">assert</span><span class="p">.</span><span class="nx">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">Vector</span><span class="p">{</span><span class="mf">6.</span><span class="p">,</span> <span class="mf">6.</span><span class="p">,</span> <span class="mf">6.</span><span class="p">},</span> <span class="nx">result</span><span class="p">,</span> <span class="s">&quot;should multiply each component by given scalar&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<p><em>As a bonus, we also get division by a scalar, by multiplying by <code>1/s</code></em></p>

<h3 id="dot-product-of-two-vectors">Dot product of two vectors</h3>

<p>The dot product is the first operation that doesn&rsquo;t return a <code>Vector</code>. It returns a scalar value of type <code>float64</code>.
This operation is particurarly important in the context of the ray tracing algorithm, because of it&rsquo;s common use in the equations.</p>

<p>It&rsquo;s algebraic definition is the following:
<figure >
    
        <img src="https://szeliga.github.io/img/equations/algebraic_dot_product.svg" alt="Dot product algebraic definition" style="width: auto; height: auto; margin: 0 auto; display: block;" />
    
    
</figure>
</p>

<p>It&rsquo;s a simple equation, we multiply corresponding coefficients of both vectors, and then sum those multiplications. But this definition isn&rsquo;t of much use in context of the ray tracing algorithm. What we need here is the geometric definition:
<figure >
    
        <img src="https://szeliga.github.io/img/equations/geometric_dot_product.svg" alt="Dot product geometric definition" style="width: auto; height: auto; margin: 0 auto; display: block;" />
    
    
</figure>
</p>

<p>The notation <code>||A||</code> means length of vector A (more on that in a sec). <code>θ</code> is the angle between the vectors. The fact that we use the cosine function gives us some interesting cases:</p>

<ol>
<li><p>When the vectors are orthogonal, then the angle between them is 90°. This means that the cosine is 0 and the whole dot product is 0</p></li>

<li><p>When the vectors are codirectional, then the angle between them is 0°. This means that the cosine is 1 and the dot product evaluates to:
<figure >
    
        <img src="https://szeliga.github.io/img/equations/geometric_dot_product_codirectional.svg" alt="Dot product geometric definition" style="width: auto; height: auto; margin: 0 auto; display: block;" />
    
    
</figure>
</p></li>
</ol>

<p>This two cases give us a way to determine if two rays are orthogonal or codirectional, which has a huge meaning when evaluating materials of objects.</p>

<p>With the theoretical stuff out of the way, let&rsquo;s proceed with the implementation:</p>
<div class="highlight"><pre><code class="language-go" data-lang="go"><span></span><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Vector</span><span class="p">)</span> <span class="nx">Dot</span><span class="p">(</span><span class="nx">b</span> <span class="nx">Vector</span><span class="p">)</span> <span class="kt">float64</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">X</span><span class="o">*</span><span class="nx">b</span><span class="p">.</span><span class="nx">X</span> <span class="o">+</span> <span class="nx">a</span><span class="p">.</span><span class="nx">Y</span><span class="o">*</span><span class="nx">b</span><span class="p">.</span><span class="nx">Y</span> <span class="o">+</span> <span class="nx">a</span><span class="p">.</span><span class="nx">Z</span><span class="o">*</span><span class="nx">b</span><span class="p">.</span><span class="nx">Z</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">TestDotProductOfTwoPerpendicularVectors</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">result</span> <span class="o">:=</span> <span class="nx">Vector</span><span class="p">{</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">}.</span><span class="nx">Dot</span><span class="p">(</span><span class="nx">Vector</span><span class="p">{</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">})</span>
	<span class="nx">assert</span><span class="p">.</span><span class="nx">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="s">&quot;dot product of two perpendicular vectors is 0&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">TestDotProductOfTwoParallelVectors</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">result</span> <span class="o">:=</span> <span class="nx">Vector</span><span class="p">{</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">}.</span><span class="nx">Dot</span><span class="p">(</span><span class="nx">Vector</span><span class="p">{</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">})</span>
	<span class="nx">assert</span><span class="p">.</span><span class="nx">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="s">&quot;dot product of two parallel vectors is 1&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<p>Pretty simple, eh?</p>

<h3 id="length-of-a-vector">Length of a vector</h3>

<p>As stated earlier, we denote the length of a vector A like this - <code>||A||</code>. It&rsquo;s algebraic definition is following:
<figure >
    
        <img src="https://szeliga.github.io/img/equations/vector_length.svg" alt="Vector length algebraic definition" style="width: auto; height: auto; margin: 0 auto; display: block;" />
    
    
</figure>
</p>

<p>As you can see, it&rsquo;s basically a dot product of a vector with itself, under a square root.
So we can use the already implemented <code>Dot</code> method, to implement this one:</p>
<div class="highlight"><pre><code class="language-go" data-lang="go"><span></span><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Vector</span><span class="p">)</span> <span class="nx">Length</span><span class="p">()</span> <span class="kt">float64</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">math</span><span class="p">.</span><span class="nx">Sqrt</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">Dot</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">TestLength</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">assert</span><span class="p">.</span><span class="nx">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="nx">Vector</span><span class="p">{</span><span class="mf">3.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">}.</span><span class="nx">Length</span><span class="p">(),</span> <span class="s">&quot;calculates the length(magnitude) correctly for Vector{3., 0., 0.}&quot;</span><span class="p">)</span>
	<span class="nx">assert</span><span class="p">.</span><span class="nx">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="mf">6.</span><span class="p">,</span> <span class="nx">Vector</span><span class="p">{</span><span class="mf">6.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">}.</span><span class="nx">Length</span><span class="p">(),</span> <span class="s">&quot;calculates the length(magnitude) correctly for Vector{6., 0., 0.}&quot;</span><span class="p">)</span>
	<span class="nx">assert</span><span class="p">.</span><span class="nx">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="mf">6.324555320336759</span><span class="p">,</span> <span class="nx">Vector</span><span class="p">{</span><span class="mf">6.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">}.</span><span class="nx">Length</span><span class="p">(),</span> <span class="s">&quot;calculates the length(magnitude) correctly for Vector{6., 2., 0.}&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="cross-product-of-two-vectors">Cross product of two vectors</h3>

<p>Unlike the dot product, the cross product returns a new vector, that is perpendicular to the other two.
Additionally this operation is defined in <strong>R<sup>3</sup></strong>.</p>

<p>The cross product can be also used for calculating a surface normal (the surface that is defined by the two vectors).
<figure >
    
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4e/Cross_product_parallelogram.svg/440px-Cross_product_parallelogram.svg.png" alt="Cross product" style="width: auto; height: auto; margin: 0 auto; display: block;" />
    
    
</figure>
</p>

<p>The cross product formula is somewhat hard to remember:
<figure >
    
        <img src="https://szeliga.github.io/img/equations/cross_product.svg" alt="Cross product formula" style="width: auto; height: auto; margin: 0 auto; display: block;" />
    
    
</figure>
</p>

<p>The implementation looks like this:</p>
<div class="highlight"><pre><code class="language-go" data-lang="go"><span></span><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Vector</span><span class="p">)</span> <span class="nx">Cross</span><span class="p">(</span><span class="nx">b</span> <span class="nx">Vector</span><span class="p">)</span> <span class="nx">Vector</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">Vector</span><span class="p">{</span>
		<span class="nx">X</span><span class="p">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">Y</span><span class="o">*</span><span class="nx">b</span><span class="p">.</span><span class="nx">Z</span> <span class="o">-</span> <span class="nx">a</span><span class="p">.</span><span class="nx">Z</span><span class="o">*</span><span class="nx">b</span><span class="p">.</span><span class="nx">Y</span><span class="p">,</span>
		<span class="nx">Y</span><span class="p">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">Z</span><span class="o">*</span><span class="nx">b</span><span class="p">.</span><span class="nx">X</span> <span class="o">-</span> <span class="nx">a</span><span class="p">.</span><span class="nx">X</span><span class="o">*</span><span class="nx">b</span><span class="p">.</span><span class="nx">Z</span><span class="p">,</span>
		<span class="nx">Z</span><span class="p">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">X</span><span class="o">*</span><span class="nx">b</span><span class="p">.</span><span class="nx">Y</span> <span class="o">-</span> <span class="nx">a</span><span class="p">.</span><span class="nx">Y</span><span class="o">*</span><span class="nx">b</span><span class="p">.</span><span class="nx">X</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">TestCrossProduct</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">result</span> <span class="o">:=</span> <span class="nx">Vector</span><span class="p">{</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">}.</span><span class="nx">Cross</span><span class="p">(</span><span class="nx">Vector</span><span class="p">{</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">})</span>
	<span class="nx">assert</span><span class="p">.</span><span class="nx">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">Vector</span><span class="p">{</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">},</span> <span class="nx">result</span><span class="p">,</span> <span class="s">&quot;cross product returns a vector perpendicular to the other two&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="normalizing-a-vector">Normalizing a vector</h3>

<p>Also called calculating a unit vector - versor:
<figure >
    
        <img src="https://szeliga.github.io/img/equations/vector_normalization.svg" alt="Vector normalization formula" style="width: auto; height: auto; margin: 0 auto; display: block;" />
    
    
</figure>
</p>

<p>All we have to do, is divide (multiply by <code>1 / x</code>) each of the vectors components by the length of the vector:</p>
<div class="highlight"><pre><code class="language-go" data-lang="go"><span></span><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Vector</span><span class="p">)</span> <span class="nx">Normalize</span><span class="p">()</span> <span class="nx">Vector</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">MultiplyByScalar</span><span class="p">(</span><span class="mf">1.</span> <span class="o">/</span> <span class="nx">a</span><span class="p">.</span><span class="nx">Length</span><span class="p">())</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">TestNormalize</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">assert</span><span class="p">.</span><span class="nx">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">Vector</span><span class="p">{</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">},</span> <span class="nx">Vector</span><span class="p">{</span><span class="mf">10.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">}.</span><span class="nx">Normalize</span><span class="p">(),</span> <span class="s">&quot;returns a unit vector (versor) from the given vector&quot;</span><span class="p">)</span>
	<span class="nx">assert</span><span class="p">.</span><span class="nx">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">Vector</span><span class="p">{</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">},</span> <span class="nx">Vector</span><span class="p">{</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">10.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">}.</span><span class="nx">Normalize</span><span class="p">(),</span> <span class="s">&quot;returns a unit vector (versor) from the given vector&quot;</span><span class="p">)</span>
	<span class="nx">assert</span><span class="p">.</span><span class="nx">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">Vector</span><span class="p">{</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">},</span> <span class="nx">Vector</span><span class="p">{</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">10.</span><span class="p">}.</span><span class="nx">Normalize</span><span class="p">(),</span> <span class="s">&quot;returns a unit vector (versor) from the given vector&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="summary">Summary</h2>

<p>Now that we have the basic math implemented, we will move to the more exciting stuff. Stay tuned.</p>


				<hr>

				<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'goray-devblog';
    var disqus_identifier = 'https:\/\/szeliga.github.io\/2016\/05\/01\/vector-operations';
    var disqus_title = 'Vector operations';
    var disqus_url = 'https:\/\/szeliga.github.io\/2016\/05\/01\/vector-operations';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
				</section>

			</article>
			<footer class="site-footer">
	<p class="text">&copy; 2016 - by Szymon Szeliga - Powered by <a href="//gohugo.io">Hugo</a> - Theme: <a href="//github.com/digitalcraftsman/hugo-type-theme">Type</a></p>
</footer>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-57222446-2', 'auto');
ga('send', 'pageview');
</script>

		</div>
	</body>
</html>